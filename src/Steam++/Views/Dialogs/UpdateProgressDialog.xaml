<Window x:Class="SteamPP.Views.Dialogs.UpdateProgressDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Updating Steam++"
        SizeToContent="Height"
        Width="450"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize"
        Closing="Window_Closing">

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="50"
                      ResizeBorderThickness="0"
                      CornerRadius="12"
                      GlassFrameThickness="0"
                      UseAeroCaptionButtons="False"/>
    </WindowChrome.WindowChrome>

    <Border Background="{DynamicResource PrimaryDarkBrush}"
            CornerRadius="12"
            BorderBrush="{DynamicResource SecondaryDarkBrush}"
            BorderThickness="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="50"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Title Bar -->
            <Border Grid.Row="0"
                    Background="{DynamicResource CardBackgroundBrush}"
                    CornerRadius="12,12,0,0"
                    MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid>
                    <TextBlock Text="Updating Steam++"
                               FontSize="16"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource AccentBrush}"
                               VerticalAlignment="Center"
                               Margin="20,0"/>
                </Grid>
            </Border>

            <!-- Content -->
            <StackPanel Grid.Row="1" Margin="20">
                <!-- Version Info -->
                <TextBlock x:Name="VersionText"
                           Text="Downloading version..."
                           FontSize="14"
                           Foreground="{DynamicResource TextSecondaryBrush}"
                           Margin="0,0,0,15"/>

                <!-- Progress Bar -->
                <ProgressBar x:Name="DownloadProgressBar"
                             Height="8"
                             Minimum="0"
                             Maximum="100"
                             Value="0"
                             Foreground="{DynamicResource AccentBrush}"
                             Background="{DynamicResource SecondaryDarkBrush}">
                    <ProgressBar.Style>
                        <Style TargetType="ProgressBar">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ProgressBar">
                                        <Grid>
                                            <Border x:Name="PART_Track"
                                                    Background="{TemplateBinding Background}"
                                                    CornerRadius="4"/>
                                            <Border x:Name="PART_Indicator"
                                                    Background="{TemplateBinding Foreground}"
                                                    CornerRadius="4"
                                                    HorizontalAlignment="Left"/>
                                        </Grid>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </ProgressBar.Style>
                </ProgressBar>

                <!-- Status Text -->
                <Grid Margin="0,10,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock x:Name="StatusText"
                               Grid.Column="0"
                               Text="Preparing download..."
                               FontSize="13"
                               Foreground="{DynamicResource TextSecondaryBrush}"/>
                    <TextBlock x:Name="PercentageText"
                               Grid.Column="1"
                               Text="0%"
                               FontSize="13"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource TextPrimaryBrush}"/>
                </Grid>

                <!-- Cancel Button -->
                <Button x:Name="CancelButton"
                        Content="Cancel"
                        Click="CancelButton_Click"
                        Style="{StaticResource SecondaryButtonStyle}"
                        FontSize="14"
                        MinWidth="100"
                        HorizontalAlignment="Right"
                        Margin="0,20,0,0"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>
